// Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø«Ø§Ø« Ø§Ù„Ø¨Ø³ÙŠØ· ÙˆØ§Ù„Ù…Ø¶Ù…ÙˆÙ†
console.log('ðŸŽ¯ ØªØ­Ù…ÙŠÙ„ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø«Ø§Ø« Ø§Ù„Ø¨Ø³ÙŠØ·...');

document.addEventListener('DOMContentLoaded', function() {
    console.log('âœ… Marzipano Ù…Ø­Ù…Ù„ - Ø¨Ø¯Ø¡ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø«Ø§Ø«');
    
    // Ø§Ù†ØªØ¸Ø± ØªØ­Ù…ÙŠÙ„ Marzipano completamente
    setTimeout(initFurnitureSystem, 3000);
});

function initFurnitureSystem() {
    console.log('ðŸª‘ Ø¨Ø¯Ø¡ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ø«Ø§Ø«...');
    
    if (!document.getElementById('pano')) {
        console.error('âŒ Ø¹Ù†ØµØ± pano ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯');
        return;
    }
    
    createFurnitureItems();
    setupColorControls();
    
    console.log('âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø«Ø§Ø« Ø¬Ø§Ù‡Ø²!');
    showMessage('ðŸŽ‰ Ù†Ø¸Ø§Ù… ØªØºÙŠÙŠØ± Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø«Ø§Ø« ÙŠØ¹Ù…Ù„ Ø¨Ù†Ø¬Ø§Ø­');
}

function createFurnitureItems() {
    // ØªÙ†Ø¸ÙŠÙ Ø£ÙŠ Ø£Ø«Ø§Ø« Ù‚Ø¯ÙŠÙ…
    document.querySelectorAll('.furniture-item').forEach(item => item.remove());
    
    const furniture = [
        { id: 'sofa1', name: 'ÙƒÙ†Ø¨Ø© Ø£Ù…Ø§Ù…ÙŠØ©', x: '40%', y: '65%' },
        { id: 'sofa2', name: 'ÙƒÙ†Ø¨Ø© ÙŠÙ…Ù†Ù‰', x: '65%', y: '55%' },
        { id: 'sofa3', name: 'ÙƒÙ†Ø¨Ø© ÙŠØ³Ø±Ù‰', x: '25%', y: '55%' },
        { id: 'table1', name: 'Ø·Ø§ÙˆÙ„Ø© ÙˆØ³Ø·', x: '45%', y: '70%' },
        { id: 'chair1', name: 'ÙƒØ±Ø³ÙŠ Ù…ÙƒØªØ¨', x: '60%', y: '40%' },
        { id: 'chair2', name: 'ÙƒØ±Ø³ÙŠ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„', x: '30%', y: '40%' }
    ];
    
    furniture.forEach(item => {
        const div = document.createElement('div');
        div.className = 'furniture-item';
        div.setAttribute('data-id', item.id);
        div.setAttribute('title', item.name);
        
        div.style.cssText = `
            position: absolute;
            left: ${item.x};
            top: ${item.y};
            width: 70px;
            height: 70px;
            background: rgba(139, 69, 19, 0.85);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            border: 3px solid white;
            transform: translate(-50%, -50%);
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            animation: gentlePulse 3s infinite;
        `;
        
        div.innerHTML = 'ðŸª‘';
        
        // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ±Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„
        div.addEventListener('mouseenter', function() {
            this.style.transform = 'translate(-50%, -50%) scale(1.2)';
            this.style.zIndex = '1001';
        });
        
        div.addEventListener('mouseleave', function() {
            this.style.transform = 'translate(-50%, -50%) scale(1)';
            this.style.zIndex = '1000';
        });
        
        div.addEventListener('click', function() {
            showMessage(`âœ… ØªÙ… ØªØ­Ø¯ÙŠØ¯: ${item.name}`);
            this.style.animation = 'clickPulse 0.5s ease';
            setTimeout(() => this.style.animation = 'gentlePulse 3s infinite', 500);
        });
        
        document.getElementById('pano').appendChild(div);
    });
    
    console.log(`âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ ${furniture.length} Ù‚Ø·Ø¹Ø© Ø£Ø«Ø§Ø«`);
}

function setupColorControls() {
    console.log('ðŸŽ¨ Ø¥Ø¹Ø¯Ø§Ø¯ ØªØ­ÙƒÙ… Ø§Ù„Ø£Ù„ÙˆØ§Ù†...');
    
    const colorButtons = document.querySelectorAll('.color-btn');
    const resetButton = document.getElementById('reset-colors');
    const toggleButton = document.getElementById('toggle-panel');
    
    const colorMap = {
        'default': 'rgba(139, 69, 19, 0.9)',
        'brown': 'rgba(160, 82, 45, 0.9)',
        'dark-brown': 'rgba(101, 67, 33, 0.9)',
        'black': 'rgba(47, 79, 79, 0.9)',
        'white': 'rgba(245, 245, 220, 0.9)',
        'walnut': 'rgba(119, 63, 26, 0.9)',
        'cherry': 'rgba(159, 29, 53, 0.9)',
        'oak': 'rgba(210, 180, 140, 0.9)',
        'mahogany': 'rgba(192, 64, 0, 0.9)'
    };
    
    const colorNames = {
        'default': 'Ø¨Ù†ÙŠ Ø®Ø´Ø¨ÙŠ', 'brown': 'Ø¨Ù†ÙŠ', 'dark-brown': 'Ø¨Ù†ÙŠ ØºØ§Ù…Ù‚',
        'black': 'Ø£Ø³ÙˆØ¯', 'white': 'Ø£Ø¨ÙŠØ¶', 'walnut': 'Ø¬ÙˆØ²',
        'cherry': 'ÙƒØ±Ø²ÙŠ', 'oak': 'Ø¨Ù„ÙˆØ·', 'mahogany': 'Ù…Ø§Ù‡ÙˆØ¬Ù†ÙŠ'
    };
    
    colorButtons.forEach(button => {
        button.addEventListener('click', function() {
            const colorType = this.getAttribute('data-color');
            const colorValue = colorMap[colorType] || colorMap.default;
            
            // ØªØºÙŠÙŠØ± Ø£Ù„ÙˆØ§Ù† Ø¬Ù…ÙŠØ¹ Ù‚Ø·Ø¹ Ø§Ù„Ø£Ø«Ø§Ø«
            document.querySelectorAll('.furniture-item').forEach(item => {
                item.style.background = colorValue;
                item.style.animation = 'colorChange 0.5s ease';
                setTimeout(() => item.style.animation = 'gentlePulse 3s infinite', 500);
            });
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø´Ø·Ø©
            colorButtons.forEach(btn => btn.classList.remove('active'));
            this.classList.add('active');
            
            showMessage(`ðŸŽ¨ ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙˆÙ† ${colorNames[colorType]}`);
        });
    });
    
    resetButton.addEventListener('click', function() {
        document.querySelectorAll('.furniture-item').forEach(item => {
            item.style.background = colorMap.default;
        });
        
        colorButtons.forEach(btn => btn.classList.remove('active'));
        document.querySelector('[data-color="default"]').classList.add('active');
        
        showMessage('ðŸ”„ ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£Ù„ÙˆØ§Ù†');
    });
    
    toggleButton.addEventListener('click', function() {
        const panel = document.getElementById('furniture-control-panel');
        if (panel) {
            panel.classList.toggle('collapsed');
            this.textContent = panel.classList.contains('collapsed') ? 'ðŸ“‹ Ø¥Ø¸Ù‡Ø§Ø±' : 'ðŸ“‹ Ø¥Ø®ÙØ§Ø¡';
        }
    });
    
    console.log('âœ… ØªØ­ÙƒÙ… Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø¬Ø§Ù‡Ø²');
}

function showMessage(message) {
    // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
    document.querySelectorAll('.furniture-message').forEach(msg => msg.remove());
    
    const messageDiv = document.createElement('div');
    messageDiv.className = 'furniture-message';
    messageDiv.textContent = message;
    messageDiv.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        z-index: 10001;
        font-size: 16px;
        font-weight: bold;
        border: 2px solid #4CAF50;
        box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        animation: messageSlide 0.3s ease-out;
    `;
    
    document.body.appendChild(messageDiv);
    
    setTimeout(() => {
        if (messageDiv.parentNode) {
            messageDiv.remove();
        }
    }, 3000);
}

// Ø¬Ø¹Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…ØªØ§Ø­Ø© Ù„Ù„ØªØµØ­ÙŠØ­
window.furnitureSystem = {
    init: initFurnitureSystem,
    createItems: createFurnitureItems
};

console.log('ðŸ“¦ Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ø«Ø§Ø« Ø§Ù„Ø¨Ø³ÙŠØ· Ù…Ø­Ù…Ù„ ÙˆØ¬Ø§Ù‡Ø²');
